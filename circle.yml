#
# Build configuration for Circle CI
#

general:
   #artifacts:
   #     - /home/ubuntu/your-app-name/app/build/outputs/apk/

machine:
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
        android-sdk-license: 8933bad161af4178b1185d1a37fbf41ea5269c55
        android-sdk-preview-license: 504667f4c0de7af1a06de9f4b1727b84351f2910
        
dependencies:
    pre:
    - chmod +x gradlew
    override:
        - echo y | android update sdk --no-ui --all --filter tools,platform-tools,build-tools-24.0.3,android-24,build-tools-25,android-25,extra-google-m2repository,extra-android-m2repository,extra-google-google_play_services,extra-android-support
        - ANDROID_HOME=/usr/local/android-sdk-linux ./gradlew dependencies

#test:
#    post:
#      - mkdir -p $CIRCLE_TEST_REPORTS/junit/
#      - find . -type f -regex ".*/build/test-results/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;
#
#      override:
#        - (./gradlew assemble):
#            timeout: 1000
