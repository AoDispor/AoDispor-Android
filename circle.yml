general:
   artifacts:
        - /home/ubuntu/AoDispor-Android/app/build/outputs/
         - $CIRLCE_TEST_REPORTS
         - target
machine:
    environment:
        ANDROID_HOME: /usr/local/android-sdk-linux
        ##android-sdk-license: 8933bad161af4178b1185d1a37fbf41ea5269c55
        ##android-sdk-preview-license: 504667f4c0de7af1a06de9f4b1727b84351f2910
        
dependencies:
    pre:
    - chmod +x gradlew
    override:
        - echo y | android update sdk --no-ui --all --filter tools,platform-tools,build-tools-24.0.3,android-24,build-tools-25,android-25,extra-google-m2repository,extra-android-m2repository,extra-google-google_play_services,extra-android-support
        - ANDROID_HOME=/usr/local/android-sdk-linux ./gradlew dependencies

test:
   override:
      - ./gradlew test --info
      - ./gradlew assembleDebug --info
      #- ./gradlew createDevDebugCoverageReport
   post:
        # Unit Tests working -> will appear on artifacts and not on tests summary!
        - mkdir -p $CIRCLE_TEST_REPORTS/junit
        - cp -r ./app/build/reports/tests/debug/* $CIRCLE_TEST_REPORTS/junit

        # Lint not working yet
        #- mkdir -p $CIRCLE_TEST_REPORTS/lint/
        #- find . -type f -regex ".*lint-results-*.*" -exec cp --parent {} $CIRCLE_TEST_REPORTS/lint/ \;

        # Checkstyle not working yet
        #- mkdir -p $CIRCLE_TEST_REPORTS/checkstyle/
        #- find . -type f -regex ".*build/reports/checkstyle/.*" -exec cp --parent {} $CIRCLE_TEST_REPORTS/checkstyle/ \;

        # Coverage not working yet
        #- mkdir -p $CIRCLE_TEST_REPORTS/coverage/
        #- cp -r ./app/build/reports/coverage/ $CIRCLE_TEST_REPORTS